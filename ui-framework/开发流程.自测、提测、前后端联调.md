# 自测与提测、前后端联调

## 前后端联调

将 mock 假数据替换成后端提供的数据
1. 前后端分别拥有自己的域名和服务器
2. 前后端开发分离但部署在同一域名和服务器
  - 跨域

Mock 数据工具: easy mock

## 测试思路

- TDD Test-Driven Development（测试驱动开发）
  + TDD 则要求在编写某个功能的代码之前先编写测试代码，然后只编写使测试通过的功能代码，通过测试来推动整个开发的进行

- BDD：Behavior-Driven Development（行为驱动开发）
  + BDD 可以让项目成员（甚至是不懂编程的）使用自然语言来描述系统功能和业务逻辑，从而根据这些描述步骤进行系统自动化的测试

## 测试方案

- 单元测试，工具类测试，减少低级 bug
  + [Vitest](https://vitest.dev/)
- 组件测试，模拟真实 dom 事件交互
  + [Testing Library](https://testing-library.com/)
- 集成测试，UI 测试，模拟用户操作对项目进行真实校验。
  + [Cypress](https://www.cypress.io/)
- 零代码自动化测试
  + [Testflowy](https://testflowy.com/)
- 手工回归测试  
- ESLint，TypeScript 项目通过 ESlint 类型和格式校验
- Mock 数据测试，将请求的各种情况显示出来

## 提测标准

- 通过自测，提交测试工程师验证
- 交叉测试
- Code Review 代码规范、主要逻辑、复杂业务注释、业务块
- 无影响正常操作及阻断流程 BUG
- 共用样式、JS、组件改动评估全局影响
- 新页面和功能，通知 UI 检查是否符合设计
- 基础兼容性测试
- 特殊环境测试
- 核心逻辑的单元测试

## 自测清单 checklist

**功能类 - 搜索/查询**

- 查询条件的合法性校验，不合法时给予正确的验证信息提示
- 单独测试查询条件
- 组合测试查询条件
- 组合联动测试查询条件
- 清空查询条件后进行查询
- 输入查询条件后点击查询，再选择分页，是否正确显示分页后的查询结果
- 在非首页的页数时，更换查询条件，是否正确查询且跳回首页
- 更换查询条件，不点击查询，直接跳入其他页，是否正常显示结果

**功能类 - 表单**

- 表单中每条数据绑定的类型
- 合法性校验
  + 是否必填
  + 空格处理（前空格/后空格/中间存在空格/不允许空格）
  + 超长字段处理
  + 字母、中文、标点、其他符号是否合法
- 创建、查看与编辑
  + 三种功能使用同一组件页面或弹窗
  + 是否正确判断状态
  + 编辑时是否正确获取了数据（也要保证创建时不要做多余的获取操作）
  + 是否将接口数据正确转换为表单中的数据（数据处理时容易出现bug）
  + 编辑保存时是否传入unique id (创建的时候别传）
  + 保存成功后要关闭弹窗
  + 保存成功后要关闭弹窗
  + 保存成功后要关闭弹窗
- 上传文件
  + 文件类型是否正确
  + 文件大小限制
  + 文件数量限制
  + 上传一个空的文件/文件夹，测试是否能够正常上传
  + 上传失败后再进行上传操作，测试能够继续正常上传
  
**样式类 - UI还原**

- 字体、字体大小、颜色、间距、宽度、高度、阴影、边框宽度及颜色

**样式类 - 溢出元素样式**

- 文本/图片/循环元素过多时的情况
- 文本超过元素的容量，超出部分被截断看不到了/显示了多行但无法滚动（元素width写了固定值/overflow没处理好）
- 文本超出的内容显示了，但是换行错位了/显示了滚动条结果影响了同行的其他元素……
- 对某元素进行循环，换行后样式错乱 or 用flex进行布局没有换行元素过多后宽度被挤压……

**样式类 - 表格内容排版**

- 内容是否只显示一行文本。只显示一行时要对列设置内容超出列宽度时的显示策略，如鼠标移入显示完整内容提示。
- 内容不显示只在一行显示时，考虑是否有列的内容需要多分配宽度，比如某一列要显示文章概述，可以为该列设置最小宽度，宽屏时可以自动为这一列设置剩余宽度。
- 像是时间戳、手机号、日期等内容较为固定的数据，为它们设置一个固定的宽度。
- 表格列数过多时要考虑处理方式，如在一行内全部展示/固定首尾列滑动展示中间内容/点击展开全部内容

**交互类 - loading 状态**

常见于查询、保存等交互操作，接口返回数据需要一定的时间，而我们 又不想让用户多次重复操作，就需要给页面/按钮加一个loading态，同时禁止点击提交按钮。

**交互类 - 修改离开**

对应修改操作，当用户修改了表单的自动，当要离开当前修改页面时需要提示用户还有数据没保存。

**交互类 - 删除操作**

对应修改操作，当用户修改了表单的自动，当要离开当前修改页面时需要提示用户还有数据没保存。

**交互类 - 空数据**

- 当页面上显示的某条数据为空时，需要考虑一下兼容策略
- 具体的值使用占位符，例如 - 、N/A
- 列表类直接不显示，用no data empty占位

**边界条件**

- 代码能正确处理接口没有返回数据的场景，比如字段不存在或者值为null或者空数组
- 接口返回未登录错误处理，确认该页面是否可以不登录访问；必须登录才可用的页面才需要跳转到登录页面
- 对于非必须登录就可以查看的页面（比如个人中心），可以忽略接口不应该返回未登录的错误。
- 文字过长（换行或省略，限制输入字符的max-length），元素很多（一行显示不下等，需要换行或者约定可显示最大值），这些测试可以保证我们在’极端‘用例下也可以正常运行。

**兼容性**

- 操作系统，windows、ios、linux
- 设备，mac、windows 笔记本、windows 台式、Android 手机、iPhone 手机
- H5 页面内嵌 APP，需要测试 ios、android APP 兼容性
- 分辨率，自适应，1000+分辨率
- 浏览器，chrome 多设备、Safari、IOS、Android

**特殊环境**

- 内网访问、外网访问、外网 VPN 访问、WIFI 访问、流量访问、网络信号强弱

**性能测试**

- js、css、img 是否压缩，是否需要再次合并
- 是否引用不必要的 js
- icon 是否使用 SVG 是否按需加载、延时加载
- 服务器是否已经启用 gzip 压缩，是否配置缓存时间
- js 是否需要延后执行、异步加载，如 Google 地图、第三方库